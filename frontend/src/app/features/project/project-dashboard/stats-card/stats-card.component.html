<div class="card stats-card">
  <h2>Project Overview</h2>

  <!-- Check if stats are available or empty -->
  <div *ngIf="!isLoading && isStatsEmpty()" class="empty-state">
    <mat-icon>info</mat-icon>
    <p>Start working on this project to see statistics.</p>
  </div>

  <!-- Quick Stats -->
  <div class="stats-grid" *ngIf="!isLoading && !isStatsEmpty()">
    <div class="stat-item">
      <div class="stat-icon">
        <mat-icon>schedule</mat-icon>
      </div>
      <div class="stat-content">
        <div class="stat-value">{{ formatMinutes(stats.totalLoggedTime) }}</div>
        <div class="stat-label">Total Time Logged For Tasks</div>
      </div>
    </div>

    <div class="stat-item">
      <div class="stat-icon">
        <mat-icon>timeline</mat-icon>
      </div>
      <div class="stat-content">
        <div class="stat-value">{{ formatMinutes(stats.weeklyAverage) }}</div>
        <div class="stat-label">Weekly Average</div>
      </div>
    </div>

    <div class="stat-item">
      <div class="stat-icon">
        <mat-icon>task_alt</mat-icon>
      </div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.completedTasks }}/{{ stats.totalTasks }}</div>
        <div class="stat-label">Tasks Completed</div>
      </div>
    </div>

    <div class="stat-item">
      <div class="stat-icon">
        <mat-icon>percent</mat-icon>
      </div>
      <div class="stat-content">
        <div class="stat-value">{{ stats.completionRate | number:'1.0-0' }}%</div>
        <div class="stat-label">Completion Rate</div>
      </div>
    </div>

    <!-- Chart for Completion Rate -->
    <div class="chart-container">
      <canvas id="completionChart"></canvas>
    </div>

    <div class="loading-spinner" *ngIf="isLoading">
      <mat-spinner diameter="40"></mat-spinner>
    </div>
  </div>
</div>

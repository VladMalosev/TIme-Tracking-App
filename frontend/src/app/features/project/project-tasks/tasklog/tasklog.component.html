<!-- task-log.component.html -->
<div class="task-log-container">
  <h3>Task History</h3>

  <div class="task-meta">
    <div class="meta-item">
      <span class="meta-label">Created by:</span>
      <span class="meta-value">{{ task.createdBy?.name || 'System' }}</span>
      <span class="meta-timestamp">{{ task.createdAt | date:'medium' }}</span>
    </div>

    <div class="meta-item" *ngIf="task.assignedTo">
      <span class="meta-label">Assigned to:</span>
      <span class="meta-value">{{ task.assignedTo.name }}</span>
      <span class="meta-timestamp" *ngIf="task.assignedAt">
        {{ task.assignedAt | date:'medium' }}
      </span>
    </div>

    <div class="meta-item" *ngIf="task.lastModifiedBy">
      <span class="meta-label">Last modified by:</span>
      <span class="meta-value">{{ task.lastModifiedBy.name }}</span>
      <span class="meta-timestamp">{{ task.updatedAt | date:'medium' }}</span>
    </div>
  </div>

  <div class="log-table" *ngIf="logs.length > 0">
    <table mat-table [dataSource]="logs">
      <!-- Action Column -->
      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef>Action</th>
        <td mat-cell *matCellDef="let log">
          <span class="log-badge" [class.created]="log.action === 'CREATED'"
                [class.updated]="log.action === 'UPDATED'"
                [class.assigned]="log.action === 'ASSIGNED'"
                [class.completed]="log.action === 'COMPLETED'">
            {{ log.action }}
          </span>
        </td>
      </ng-container>

      <!-- User Column -->
      <ng-container matColumnDef="user">
        <th mat-header-cell *matHeaderCellDef>User</th>
        <td mat-cell *matCellDef="let log">{{ log.user?.name || 'System' }}</td>
      </ng-container>

      <!-- Timestamp Column -->
      <ng-container matColumnDef="timestamp">
        <th mat-header-cell *matHeaderCellDef>When</th>
        <td mat-cell *matCellDef="let log">{{ log.timestamp | date:'medium' }}</td>
      </ng-container>

      <!-- Details Column -->
      <ng-container matColumnDef="details">
        <th mat-header-cell *matHeaderCellDef>Details</th>
        <td mat-cell *matCellDef="let log">{{ log.details }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
</div>
